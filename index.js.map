{"version":3,"file":"index.js","sources":["../src/js/showMessage.js","../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/submitHandler.js","../src/js/onLoadMoreBtn.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showMessage(message, color) {\n  iziToast.info({\n    message: `${message}`,\n    position: 'topRight',\n    backgroundColor: `${color}`,\n  });\n}\n","export const refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  div: document.createElement('div'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  API_KEY: '46342237-7f01d30a27b9cd655db8e01c6',\n  BASE_URL: 'https://pixabay.com/api/?',\n  eventType: '',\n  queryString: '',\n  currentPage: 1,\n\n  options: {\n    method: 'GET',\n  },\n\n  color: {\n    blue: '#abd4f8',\n    red: '#e97782',\n  },\n\n  message: {\n    info: 'Please enter a value in the search field!',\n    warning:\n      'Sorry, there are no images matching your search query. Please try again!',\n    error:\n      'Sorry, there are no connection to the server. Please try again later! ',\n    exception:\n      'Exception: We have some issue with connection. Please try again later! ',\n    lastPage: `We're sorry, but you've reached the end of search results.`,\n  },\n\n  config: {\n    params: {\n      image_type: 'photo',\n      orientations: 'horizontal',\n      safesearch: true,\n      page: 1,\n      per_page: 15,\n    },\n  },\n};\n","import axios from 'axios';\nimport { showMessage } from './showMessage';\nimport { refs } from './refs';\nimport { renderAPI } from './render-functions';\n\nexport async function getGalleryData(queryValue, page) {\n  try {\n    renderAPI.fetchLoader();\n    refs.config.params.key = refs.API_KEY;\n    refs.config.params.q = queryValue;\n    refs.config.params.page = page;\n\n    const response = await axios.get(refs.BASE_URL, refs.config);\n    return response.data;\n  } catch (err) {\n    showMessage(\n      `${refs.message.exception} ERROR: ${err.message}` + 2,\n      refs.color.red\n    );\n  }\n}\n","import { refs } from './refs';\nimport { showMessage } from './showMessage';\nimport { getGalleryData } from './pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction fetchGallery(data) {\n  refs.gallery.insertAdjacentHTML('beforeend', markup(data));\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n\t\t\t\t<li class=\"gallery-item hvr-grow\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t<figcaption class=\"gallery-figcaption\">\n\t\t\t\t\t\t\t\t<ul class=\"img-content-wrapper\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t`\n    )\n    .join('');\n}\n\nasync function renderGallery(searchValue, page) {\n  try {\n    if (searchValue === refs.queryString && refs.eventType === 'click') {\n      refs.currentPage += 1;\n      page += 1;\n    }\n\n    const galleryData = await getGalleryData(searchValue, page);\n\n    removeLoader();\n\n    if (validateGalleryData(galleryData)) {\n      const restOfImages = Math.round(galleryData.totalHits / page);\n      fetchGallery(galleryData);\n      showHideBtn(restOfImages);\n    }\n  } catch (error) {\n    showMessage(refs.message.exception + error + 3, refs.color.red);\n  }\n}\n\nfunction validateGalleryData(galleryData) {\n  if (!galleryData) {\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showMessage(refs.message.warning, refs.color.blue);\n    refs.gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n\nfunction scrollVertical(x = 0, y = 0) {\n  window.scrollBy({ top: x, left: y, behavior: 'smooth' });\n}\n\nfunction removeLoader() {\n  const loaderWrapper = document.querySelector('.loader-wrapper');\n\n  loaderWrapper.remove();\n}\n\nfunction showHideBtn(imagesCount) {\n  if (imagesCount <= refs.config.params.per_page) {\n    refs.loadMoreBtn.classList.remove('visible');\n    showMessage(refs.message.lastPage, refs.color.blue);\n    return;\n  }\n  refs.loadMoreBtn.classList.add('visible');\n}\n\nfunction fetchLoader() {\n  refs.gallery.insertAdjacentHTML(\n    'beforeend',\n    `<div class='loader-wrapper'>\n        <div class='loader'></div>\n    </div>`\n  );\n}\n\nexport const renderAPI = {\n  fetchGallery,\n  markup,\n  renderGallery,\n  validateGalleryData,\n  scrollVertical,\n  removeLoader,\n  showHideBtn,\n  fetchLoader,\n};\n","import iziToast from 'izitoast';\n\nimport { showMessage } from './showMessage';\n\nimport { renderAPI } from './render-functions';\n\nimport { refs } from './refs';\n\nexport async function submitHandler(event) {\n  try {\n    event.preventDefault();\n\n    const target = event.target;\n    const search = target.elements.search.value.trim();\n    refs.eventType = 'submit';\n    refs.loadMoreBtn.classList.remove('visible');\n\n    iziToast.destroy();\n\n    if (refs.queryString !== search || refs.eventType === 'submit') {\n      refs.gallery.innerHTML = '';\n      refs.queryString = target.elements.search.value.trim();\n      refs.currentPage = 1;\n    }\n\n    if (!search.trim()) {\n      showMessage(refs.message.info, refs.color.blue);\n      refs.gallery.innerHTML = '';\n      return;\n    }\n\n    await renderAPI.renderGallery(refs.queryString, refs.currentPage);\n    target.reset();\n  } catch (error) {\n    showMessage(refs.message.exception + error, refs.color.red);\n    refs.gallery.innerHTML = '';\n  }\n}\n","import { refs } from './refs';\nimport { showMessage } from './showMessage';\nimport { renderAPI } from './render-functions';\n\nexport async function onLoadMoreBtn(event) {\n  try {\n    refs.eventType = 'click';\n    await renderAPI.renderGallery(refs.queryString, refs.currentPage);\n    const liEl = document.querySelector('li');\n    const { height } = liEl.getBoundingClientRect();\n    renderAPI.scrollVertical(height * 2, 0);\n  } catch (error) {\n    showMessage(refs.message.exception + error + 1, refs.color.red);\n    //   showMessage(refs.message.exception + error, refs.color.red);\n  }\n}\n","import { submitHandler } from './js/submitHandler';\nimport { onLoadMoreBtn } from './js/onLoadMoreBtn';\nimport { refs } from './js/refs';\n\nrefs.form.addEventListener('submit', submitHandler);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n"],"names":["showMessage","message","color","iziToast","refs","getGalleryData","queryValue","page","renderAPI","axios","err","lightbox","SimpleLightbox","fetchGallery","data","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","searchValue","galleryData","removeLoader","validateGalleryData","restOfImages","showHideBtn","error","scrollVertical","x","y","imagesCount","fetchLoader","submitHandler","event","target","search","onLoadMoreBtn","liEl","height"],"mappings":"owBAGO,SAASA,EAAYC,EAASC,EAAO,CAC1CC,EAAS,KAAK,CACZ,QAAS,GAAGF,CAAO,GACnB,SAAU,WACV,gBAAiB,GAAGC,CAAK,EAC7B,CAAG,CACH,CCTO,MAAME,EAAO,CAClB,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,IAAK,SAAS,cAAc,KAAK,EACjC,YAAa,SAAS,cAAc,gBAAgB,EACpD,QAAS,qCACT,SAAU,4BACV,UAAW,GACX,YAAa,GACb,YAAa,EAEb,QAAS,CACP,OAAQ,KACT,EAED,MAAO,CACL,KAAM,UACN,IAAK,SACN,EAED,QAAS,CACP,KAAM,4CACN,QACE,2EACF,MACE,yEACF,UACE,0EACF,SAAU,4DACX,EAED,OAAQ,CACN,OAAQ,CACN,WAAY,QACZ,aAAc,aACd,WAAY,GACZ,KAAM,EACN,SAAU,EACX,CACF,CACH,ECnCO,eAAeC,EAAeC,EAAYC,EAAM,CACrD,GAAI,CACF,OAAAC,EAAU,YAAW,EACrBJ,EAAK,OAAO,OAAO,IAAMA,EAAK,QAC9BA,EAAK,OAAO,OAAO,EAAIE,EACvBF,EAAK,OAAO,OAAO,KAAOG,GAET,MAAME,EAAM,IAAIL,EAAK,SAAUA,EAAK,MAAM,GAC3C,IACjB,OAAQM,EAAK,CACZV,EACE,GAAGI,EAAK,QAAQ,SAAS,WAAWM,EAAI,OAAO,IAC/CN,EAAK,MAAM,GACjB,CACG,CACH,CCdA,MAAMO,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,EAAaC,EAAM,CAC1BV,EAAK,QAAQ,mBAAmB,YAAaW,EAAOD,CAAI,CAAC,EAEzDH,EAAS,QAAO,CAClB,CAEA,SAASI,EAAOD,EAAM,CACpB,OAAOA,EAAK,KACT,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,qCAEyBL,CAAa;AAAA;AAAA,yCAETD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0BAGzCC,CAAK;AAAA,0BACLC,CAAK;AAAA,6BACFC,CAAQ;AAAA,8BACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOlC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeC,EAAcC,EAAajB,EAAM,CAC9C,GAAI,CACEiB,IAAgBpB,EAAK,aAAeA,EAAK,YAAc,UACzDA,EAAK,aAAe,EACpBG,GAAQ,GAGV,MAAMkB,EAAc,MAAMpB,EAAemB,EAAajB,CAAI,EAI1D,GAFAmB,IAEIC,EAAoBF,CAAW,EAAG,CACpC,MAAMG,EAAe,KAAK,MAAMH,EAAY,UAAYlB,CAAI,EAC5DM,EAAaY,CAAW,EACxBI,EAAYD,CAAY,CACzB,CACF,OAAQE,EAAO,CACd9B,EAAYI,EAAK,QAAQ,UAAY0B,EAAQ,EAAG1B,EAAK,MAAM,GAAG,CAC/D,CACH,CAEA,SAASuB,EAAoBF,EAAa,CACxC,OAAKA,EAGMA,GAAeA,EAAY,YAAc,GAClDzB,EAAYI,EAAK,QAAQ,QAASA,EAAK,MAAM,IAAI,EACjDA,EAAK,QAAQ,UAAY,GAClB,IAEA,IAPP,QAAQ,UAAY,GACb,GAQX,CAEA,SAAS2B,EAAeC,EAAI,EAAGC,EAAI,EAAG,CACpC,OAAO,SAAS,CAAE,IAAKD,EAAG,KAAMC,EAAG,SAAU,QAAQ,CAAE,CACzD,CAEA,SAASP,GAAe,CACA,SAAS,cAAc,iBAAiB,EAEhD,OAAM,CACtB,CAEA,SAASG,EAAYK,EAAa,CAChC,GAAIA,GAAe9B,EAAK,OAAO,OAAO,SAAU,CAC9CA,EAAK,YAAY,UAAU,OAAO,SAAS,EAC3CJ,EAAYI,EAAK,QAAQ,SAAUA,EAAK,MAAM,IAAI,EAClD,MACD,CACDA,EAAK,YAAY,UAAU,IAAI,SAAS,CAC1C,CAEA,SAAS+B,GAAc,CACrB/B,EAAK,QAAQ,mBACX,YACA;AAAA;AAAA,WAGJ,CACA,CAEO,MAAMI,EAAY,CACvB,aAAAK,EACA,OAAAE,EACA,cAAAQ,EACA,oBAAAI,EACA,eAAAI,EACA,aAAAL,EACA,YAAAG,EACA,YAAAM,CACF,EChHO,eAAeC,EAAcC,EAAO,CACzC,GAAI,CACFA,EAAM,eAAc,EAEpB,MAAMC,EAASD,EAAM,OACfE,EAASD,EAAO,SAAS,OAAO,MAAM,OAY5C,GAXAlC,EAAK,UAAY,SACjBA,EAAK,YAAY,UAAU,OAAO,SAAS,EAE3CD,EAAS,QAAO,GAEZC,EAAK,cAAgBmC,GAAUnC,EAAK,YAAc,YACpDA,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAckC,EAAO,SAAS,OAAO,MAAM,OAChDlC,EAAK,YAAc,GAGjB,CAACmC,EAAO,OAAQ,CAClBvC,EAAYI,EAAK,QAAQ,KAAMA,EAAK,MAAM,IAAI,EAC9CA,EAAK,QAAQ,UAAY,GACzB,MACD,CAED,MAAMI,EAAU,cAAcJ,EAAK,YAAaA,EAAK,WAAW,EAChEkC,EAAO,MAAK,CACb,OAAQR,EAAO,CACd9B,EAAYI,EAAK,QAAQ,UAAY0B,EAAO1B,EAAK,MAAM,GAAG,EAC1DA,EAAK,QAAQ,UAAY,EAC1B,CACH,CCjCO,eAAeoC,EAAcH,EAAO,CACzC,GAAI,CACFjC,EAAK,UAAY,QACjB,MAAMI,EAAU,cAAcJ,EAAK,YAAaA,EAAK,WAAW,EAChE,MAAMqC,EAAO,SAAS,cAAc,IAAI,EAClC,CAAE,OAAAC,CAAM,EAAKD,EAAK,sBAAqB,EAC7CjC,EAAU,eAAekC,EAAS,EAAG,CAAC,CACvC,OAAQZ,EAAO,CACd9B,EAAYI,EAAK,QAAQ,UAAY0B,EAAQ,EAAG1B,EAAK,MAAM,GAAG,CAE/D,CACH,CCXAA,EAAK,KAAK,iBAAiB,SAAUgC,CAAa,EAClDhC,EAAK,YAAY,iBAAiB,QAASoC,CAAa"}